<!DOCTYPE html>
<html lang="en">
  <head>
    <title>doordeck_sdk_swift  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="doordeck_sdk_swift  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">doordeck_sdk_swift Docs</a> (23% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">doordeck_sdk_swift Reference</a>
        <img id="carat" src="img/carat.png" />
        doordeck_sdk_swift  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AFRequest.html">AFRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/APIClient.html">APIClient</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/APIClient/error.html">– error</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/APIClient/deviceStatus.html">– deviceStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BottomViewController.html">BottomViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BottomViewControllerQR.html">BottomViewControllerQR</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Doordeck.html">Doordeck</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Doordeck/ReaderType.html">– ReaderType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Doordeck/State.html">– State</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Header.html">Header</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Header/HeaderType.html">– HeaderType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Header/version.html">– version</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/JsonHelper.html">JsonHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/KeychainHelper.html">KeychainHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockDevice.html">LockDevice</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockDevice/currentUnlockProgress.html">– currentUnlockProgress</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockDevice/lockSizeOptions.html">– lockSizeOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockManager.html">LockManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockManager/deviceError.html">– deviceError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LockUnlockViewController.html">LockUnlockViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/QuickEntryViewController.html">QuickEntryViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReachabilityHelper.html">ReachabilityHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Site.html">Site</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SodiumHelper.html">SodiumHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TokenHelper.html">TokenHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TokenHelper/TokenType.html">– TokenType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TokenHelper/ChangePassword.html">– ChangePassword</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Util.html">Util</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/cacheHelper.html">cacheHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/doordeckNotifications.html">doordeckNotifications</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Fonts.html">Fonts</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/KeychainError.html">KeychainError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PrintChannel.html">PrintChannel</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NFCNDEFPayload.html">NFCNDEFPayload</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSAttributedString.html">NSAttributedString</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSNotification.html">NSNotification</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSNotification/Name.html">– Name</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIApplication.html">UIApplication</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIButton.html">UIButton</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIColor.html">UIColor</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIDevice.html">UIDevice</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UIDevice/BatteryState.html">– BatteryState</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UUID.html">UUID</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UserDefaults.html">UserDefaults</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:18doordeck_sdk_swift5print_6objectyAA12PrintChannelO_yptF">print(_:object:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DoordeckInternalProtocol.html">DoordeckInternalProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DoordeckProtocol.html">DoordeckProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/KeychainHelperProtocol.html">KeychainHelperProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/quickEntryDelegate.html">quickEntryDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AppStrings.html">AppStrings</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AuthTokenClass.html">AuthTokenClass</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LocationServices.html">LocationServices</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/QueryManager.html">QueryManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SiteLocation.html">SiteLocation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URLManager.html">URLManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/URLManager/verificationMethod.html">– verificationMethod</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/VisitorPass.html">VisitorPass</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/lockUnlockScreen.html">lockUnlockScreen</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/lockUnlockScreen/executionOrigin.html">– executionOrigin</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/shareableLocks.html">shareableLocks</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p>This readme will explain the necessary steps, to import Doordeck into your app.
*due to a bug in Xcode 10, I cannot create a pod at the minute, this will be coming soon. </p>

<p>A sample app has been provided to show how to integrate with Doordeck.</p>
<h2 id='step-1-import-dependencies' class='heading'>Step 1 - import Dependencies</h2>

<p>Import <a href="https://github.com/doordeck/doordeck-sdk-swift/tree/master/doordeck-sdk-swift">doordeck-sdk-swift</a> into your project. I would suggest adding this to a separate folder, within your project.</p>
<h2 id='step-2-install-pods' class='heading'>Step 2 - install pods</h2>

<p>Add the following pods to your project </p>
<pre class="highlight plaintext"><code>  pod "QRCodeReader.swift", "~&gt; 10.0"
  pod "ReachabilitySwift", "~&gt; 4.3"
  pod "Alamofire", "~&gt; 4.8"
  pod "Cache", "~&gt; 5.2"
  pod "Sodium", "~&gt; 0.8"
</code></pre>

<p>Sodium does not currently work with Xcode 10, please use this fix, until Sodium is updated.</p>
<h2 id='step-3-add-permissions' class='heading'>Step 3 - add permissions</h2>

<p>Add the following to your project plist.</p>
<pre class="highlight plaintext"><code> “Privacy - Camera Usage Description” -&gt; “NSCameraUsageDescription”
 “Privacy - NFC Scan Usage Description” -&gt; “NFCReaderUsageDescription”
 “Privacy - Location When In Use Usage Description” -&gt; “NSLocationAlwaysAndWhenInUseUsageDescription”
</code></pre>
<h3 id='optional-this-is-helpful-if-you-are-using-doordeck-in-a-today-widget' class='heading'>Optional - this is helpful if you are using Doordeck in a today widget.</h3>
<pre class="highlight plaintext"><code> “Privacy - Location Always Usage Description” -&gt; “NSLocationAlwaysUsageDescription"
</code></pre>

<p>The Camera permission is needed for the QR code reader, the NFC is needed for the NFC reader. The GPS permissions are used for GPS geofenced locks. 
Please make sure adequate descriptions are added to the keys, as they will be seen by the end user </p>
<h2 id='step-4-nfc-tag-reading' class='heading'>Step 4 - NFC Tag Reading</h2>

<p>In your target project go to Capabilities and enable <q>Near Field Communication Tag Reading</q>, this will then enable the app for NFC.</p>
<h2 id='step-5-doordeck-delegate-and-auth-token' class='heading'>Step 5 - Doordeck delegate and Auth Token</h2>

<p>Initialise doordeck, Doordeck expect the host app to pass an AuthToken that will be used to authenticate the user. 
Use AuthTokenClass when submitting an AuthToken to Doordeck.
You then need to set the delegate to a class.</p>
<h3 id='please-keep-in-mind-the-that-you-would-need-to-provide-your-own-token-to-use-the-sample-app-for-security-reasons-this-has-not-been-committed-into-the-repo' class='heading'>Please keep in mind the that you would need to provide your own token, to use the sample app, for security reasons this has not been committed into the repo.</h3>
<pre class="highlight plaintext"><code>        let token = AuthTokenClass(self.token)
        doordeck = Doordeck(token)
        doordeck?.delegate  = self
</code></pre>
<h2 id='step-6-protocol-confirmation' class='heading'>Step 6 - Protocol confirmation</h2>

<p>Conform to DoordeckProtocal, These methods can be used to keep the app up to date.</p>
<pre class="highlight plaintext"><code>extension ViewController: DoordeckProtocol {
    func verificationNeeded() {
        print("verificationNeeded")
    }

    func newAuthTokenRequired() -&gt; AuthTokenClass {
        print("newAuthTokenRequired")
        return AuthTokenClass(self.token)
    }

    func unlockSuccessful() {
        print("unlockSuccessful")
    }
}
</code></pre>
<h2 id='step-7-initialise-doordeck' class='heading'>Step 7 - Initialise Doordeck</h2>

<p>We recommend that the host app first calls doordeck initialise, this will speed up the unlock process.</p>
<pre class="highlight plaintext"><code>doordeck?.Initialize()
</code></pre>
<h2 id='step-8-unlock' class='heading'>Step 8 - Unlock</h2>

<p>Unlock a door</p>
<pre class="highlight plaintext"><code>        doordeck?.showUnlockScreen(success: {

        }, fail: {

        })
       }

</code></pre>

<p>Please keep in mind, Doordeck servers can reject a user and ask for permissions, if the Public key sent does not match the one on the server currently.</p>
<h2 id='step-9-optional-events' class='heading'>Step 9 - Optional Events</h2>

<p>This is an optional step, suscribing to events will allow you to get an Enum of the events that the SDK is going through. 
This is helpful for both debugging problems and events collection.</p>

<p>place the following in viewDidAppear</p>
<pre class="highlight plaintext"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.doordeckEvents(_:)), name: SDKEvent().doordeckEventsName, object: nil)
</code></pre>

<p>This is the Method for the events</p>
<pre class="highlight plaintext"><code>    @objc func doordeckEvents (_ event: NSNotification) {
        guard let eventAction = event.object as? SDKEvent.EventAction else {
            return
        }
        print(eventAction)
    }
</code></pre>

<p>Place this is in the viewDidDisappear</p>
<pre class="highlight plaintext"><code>NotificationCenter.default.removeObserver(self, name: SDKEvent().doordeckEventsName, object: nil)
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="https://github.com/doordeck/doordeck-sdk-swift" target="_blank" rel="external">Doordeck</a>. All rights reserved. (Last updated: 2019-05-03)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
